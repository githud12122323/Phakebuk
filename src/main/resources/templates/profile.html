<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trang c√° nh√¢n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-center mb-4">üë§ Trang c√° nh√¢n c·ªßa <span th:text="${profileUser.fullName}">T√™n ng∆∞·ªùi d√πng</span></h2>

    <div class="text-center mb-4">
        <img th:src="@{${user.avatar}}" alt="Avatar" width="120" class="rounded-circle border">
        <form th:action="@{/profile/update}" method="post" enctype="multipart/form-data" class="mt-2">
            <input type="file" name="avatar" accept="image/*" class="form-control mb-2">
            <button type="submit" class="btn btn-outline-primary btn-sm">C·∫≠p nh·∫≠t ·∫£nh ƒë·∫°i di·ªán</button>
        </form>
    </div>

    <div th:if="${profileUser.username != user.username}" class="text-center mb-4">
        <form th:if="${isFollowing}" th:action="@{'/unfollow/' + ${profileUser.username}}" method="post" style="display: inline-block;">
            <button type="submit" class="btn btn-outline-danger">B·ªè theo d√µi</button>
        </form>
        <form th:unless="${isFollowing}" th:action="@{'/follow/' + ${profileUser.username}}" method="post" style="display: inline-block;">
            <button type="submit" class="btn btn-outline-success">Theo d√µi</button>
        </form>
        <a th:href="@{'/chat/' + ${profileUser.username}}" class="btn btn-outline-secondary ms-2">üí¨ Nh·∫Øn tin</a>
    </div>

    <hr>
    <h4>B√†i vi·∫øt</h4>
    <div th:each="post : ${posts}" class="card mb-4 shadow-sm">
        <div class="card-body">
            <p th:text="${post.content}">N·ªôi dung b√†i vi·∫øt</p>

            <img th:if="${post.imageUrl != null}" th:src="@{${post.imageUrl}}" class="img-fluid rounded mb-2"/>
            <video th:if="${post.videoUrl != null}" class="w-100 mb-2" controls>
                <source th:src="@{${post.videoUrl}}" type="video/mp4"/>
            </video>

            <p><small class="text-muted" th:text="${post.formattedDate}">Ng√†y ƒëƒÉng</small></p>
            <p><strong th:text="${post.likes.size()}">0</strong> l∆∞·ª£t th√≠ch</p>

            <h6>B√¨nh lu·∫≠n:</h6>
            <ul class="list-group list-group-flush">
                <li th:each="comment : ${post.comments}" class="list-group-item">
                    <b th:text="${comment.user.fullName}">T√™n</b>: <span th:text="${comment.content}">N·ªôi dung</span>
                </li>
            </ul>
        </div>
    </div>

    <div class="text-center">
        <a href="/home" class="btn btn-secondary">‚¨Ö Tr·ªü v·ªÅ trang ch·ªß</a>
    </div>
</div>
</body>
</html>
